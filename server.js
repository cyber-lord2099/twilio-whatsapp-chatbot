const express = require('express');
const app = express();
app.use(express.json());

let userState = {};

const schemes = [
  {
    id: "1",
    name: "शैक्षणिक योजना",
    description: "इतर मागास वर्ग, विमुक्त जाती, भटक्या जमाती आणि विशेष मागास प्रवर्गातील विद्यार्थ्यांसाठी शैक्षणिक योजना.",
    subSchemes: [
      {
        id: "1-1",
        name: "आश्रमशाळा",
        description: "निवासी शाळा ज्या मोफत शिक्षण आणि सुविधा प्रदान करतात.",
        subSchemes: [
          {
            id: "1-1-1",
            name: "विमुक्त जाती, भटक्या जमाती व विशेष मागास प्रवर्गासाठीच्या आश्रमशाळा",
            description: "महाराष्ट्रातील विमुक्त जाती आणि भटक्या जमाती तसेच विशेष मागास प्रवर्गातील विद्यार्थ्यांसाठी ५३० प्राथमिक आश्रमशाळा, २९७ माध्यमिक आश्रमशाळा व १३८ उच्च माध्यमिक आश्रमशाळा चालविल्या जातात. या आश्रमशाळांमधून विद्यार्थ्यांना शासनाकडून मोफत निवास, भोजन, शालेय साहित्य, गणवेश (वर्षातून दोनदा) व अंथरुण-पांघरुण इत्यादी सोयी सुविधा पुरविल्या जातात. या आश्रमशाळांमध्ये शिक्षणासह विद्यार्थ्यांच्या सर्वांगीण विकासासाठी खेळ, सांस्कृतिक कार्यक्रम आणि आरोग्य तपासणी यासारख्या सुविधा देखील उपलब्ध आहेत. या शाळा ग्रामीण आणि दुर्गम भागात स्थापन केल्या गेल्या असून, त्यामुळे या प्रवर्गातील मुलांना शिक्षणाची संधी मिळते.",
          },
          {
            id: "1-1-2",
            name: "उसतोड कामगारांच्या मुलामुलींसाठी निवासी आश्रमशाळा",
            description: "उसतोड कामगारांच्या मुला-मुलींसाठी बीड जिल्ह्यात ६ आश्रमशाळा चालविल्या जातात, ज्या त्यांच्या शिक्षणासाठी निवासी सुविधा पुरवतात. या शाळांमध्ये मुलांना शिक्षणासोबतच मोफत निवास, भोजन आणि शालेय साहित्य पुरवले जाते, ज्यामुळे त्यांच्या पालकांच्या स्थलांतरामुळे शिक्षणात खंड पडत नाही.",
          },
          {
            id: "1-1-3",
            name: "विद्यानिकेतन शाळा",
            description: "नांदेड विभागातील नंदुरबार जिल्ह्यात १ विद्यानिकेतन शाळा चालविली जाते, जी विमुक्त जाती व भटक्या जमातीच्या विद्यार्थ्यांसाठी शैक्षणिक सुविधा प्रदान करते. या शाळेत विशेषतः गुणवंत विद्यार्थ्यांना प्रोत्साहन दिले जाते आणि त्यांना उच्च शिक्षणासाठी मार्गदर्शन केले जाते.",
          },
        ],
      },
      {
        id: "1-2",
        name: "शिष्यवृत्ती",
        description: "विविध स्तरांवर शिक्षणासाठी आर्थिक सहाय्य.",
        subSchemes: [
          {
            id: "1-2-1",
            name: "मॅट्रिकपूर्व शिष्यवृत्ती",
            description: "इतर मागास वर्ग, विमुक्त जाती, भटक्या जमाती व विशेष मागास प्रवर्गातील विद्यार्थ्यांसाठी प्राथमिक आणि माध्यमिक शिक्षणाला प्रोत्साहन देण्यासाठी मॅट्रिकपूर्व शिष्यवृत्ती योजना राबविली जाते. या योजनेंतर्गत विद्यार्थ्यांना शालेय शुल्क, पुस्तके आणि गणवेशासाठी आर्थिक सहाय्य दिले जाते, ज्यामुळे त्यांचे शिक्षण सुरळीत चालते.",
          },
          {
            id: "1-2-2",
            name: "मॅट्रिकोत्तर शिष्यवृत्ती",
            description: "इतर मागास वर्ग, विमुक्त जाती, भटक्या जमाती व विशेष मागास प्रवर्गातील विद्यार्थ्यांसाठी उच्च शिक्षणाला प्रोत्साहन देण्यासाठी मॅट्रिकोत्तर शिष्यवृत्ती योजना राबविली जाते. या योजनेंतर्गत महाविद्यालयीन शिक्षण घेणाऱ्या विद्यार्थ्यांना शुल्क माफी, निवास भत्ता आणि पुस्तकांसाठी आर्थिक सहाय्य मिळते.",
          },
          {
            id: "1-2-3",
            name: "परदेशात उच्च शिक्षणासाठी शिष्यवृत्ती योजना",
            description: "इतर मागास वर्ग, विमुक्त जाती, भटक्या जमाती व विशेष मागास प्रवर्गातील गुणवंत विद्यार्थ्यांना परदेशात उच्च शिक्षणासाठी शिष्यवृत्ती प्रदान करण्याची योजना. या योजनेंतर्गत विद्यार्थ्यांना परदेशातील नामांकित विद्यापीठांमध्ये शिक्षण घेण्यासाठी शुल्क, प्रवास खर्च आणि निवासासाठी आर्थिक सहाय्य दिले जाते.",
          },
        ],
      },
      {
        id: "1-3",
        name: "वसतीगृहे / आधार योजना",
        description: "इतर मागास वर्ग, विमुक्त जाती, भटक्या जमाती आणि विशेष मागास प्रवर्गातील विद्यार्थ्यांसाठी निवास आणि शिक्षणासाठी सहाय्य.",
        subSchemes: [
          {
            id: "1-3-1",
            name: "राज्यातील इतर मागास प्रवर्ग, विमुक्त जाती, भटक्या जमाती व विशेष मागास प्रवर्ग या प्रवर्गातील विद्यार्थ्यांसाठी जिल्हानिहाय वसतीगृहे",
            description: "राज्यातील इतर मागास प्रवर्ग, विमुक्त जाती, भटक्या जमाती व विशेष मागास प्रवर्गातील विद्यार्थ्यांसाठी जिल्हानिहाय वसतीगृहे सुरु करण्यात आली आहेत, जिथे मोफत निवास, भोजन आणि शैक्षणिक सुविधा पुरविल्या जातात. या वसतीगृहांमध्ये विद्यार्थ्यांना अभ्यासासाठी शांत वातावरण, ग्रंथालय आणि मार्गदर्शन उपलब्ध आहे.",
          },
          {
            id: "1-3-2",
            name: "ज्ञानज्योती सावित्रीबाई फुले आधार योजना",
            description: "इतर मागास वर्ग, विमुक्त जाती, भटक्या जमाती व विशेष मागास प्रवर्गातील मुलींच्या शिक्षणाला आणि स्वावलंबनाला प्रोत्साहन देण्यासाठी आर्थिक सहाय्य प्रदान करणारी योजना. या योजनेंतर्गत मुलींना शालेय साहित्य, शुल्क माफी आणि आर्थिक प्रोत्साहन दिले जाते, ज्यामुळे त्यांच्या शिक्षणातील अडचणी दूर होतात आणि त्यांना स्वतःच्या पायावर उभे राहण्यास मदत मिळते.",
          },
        ],
      },
    ],
  },
  {
    id: "2",
    name: "पायाभूत सुविधा संबंधित योजना",
    description: "या योजनांचे तपशील उपलब्ध नाहीत.",
    subSchemes: [],
  },
  {
    id: "3",
    name: "कौशल्य विकासाच्या योजना",
    description: "कौशल्य विकास आणि प्रशिक्षणासाठी योजना.",
    subSchemes: [
      {
        id: "3-1",
        name: "संस्था",
        description: "प्रशिक्षण आणि कौशल्य विकासासाठी संस्था.",
        subSchemes: [
          {
            id: "3-1-1",
            name: "महात्मा ज्योतिबा फुले संशोधन व प्रशिक्षण संस्था (महाज्योती), नागपूर",
            description: "इतर मागास प्रवर्ग, विमुक्त जाती, भटक्या जमाती आणि विशेष मागास प्रवर्गातील व्यक्तींसाठी संशोधन आणि प्रशिक्षण देणारी संस्था, जी कौशल्य विकासाला प्रोत्साहन देते. महाज्योती संस्था दरवर्षी १०,००० हून अधिक विद्यार्थ्यांना प्रशिक्षण देते, ज्यात संगणक प्रशिक्षण, उद्योजकता विकास आणि स्पर्धा परीक्षा मार्गदर्शन यांचा समावेश आहे. ही संस्था ओबीसी, विमुक्त जाती आणि भटक्या जमातींना प्राधान्य देते.",
          },
          {
            id: "3-1-2",
            name: "महाराष्ट्र संशोधन उत्थान व प्रशिक्षण प्रबोधिनी (अमृत)",
            description: "खुल्या प्रवर्गातील व्यक्तींसाठी कौशल्य विकास आणि प्रशिक्षण देणारी संस्था. या संस्थेमार्फत विविध व्यावसायिक अभ्यासक्रम राबविले जातात, ज्यामुळे व्यक्तींना रोजगाराच्या संधी उपलब्ध होतात आणि त्यांचे जीवनमान सुधारते.",
          },
        ],
      },
    ],
  },
  {
    id: "4",
    name: "अर्थसहाय्याच्या योजना",
    description: "आर्थिक सहाय्यासाठी योजना.",
    subSchemes: [
      {
        id: "4-1",
        name: "महामंडळे",
        description: "विकास महामंडळांमार्फत आर्थिक सहाय्य.",
        subSchemes: [
          {
            id: "4-1-1",
            name: "महाराष्ट्र राज्य इतर मागास वर्गीय वित्त आणि विकास महामंडळ",
            description: "इतर मागास वर्गीय समुदायांसाठी आर्थिक सहाय्य.",
            subSchemes: [
              {
                id: "4-1-1-1",
                name: "शामराव पेजे आर्थिक विकास महामंडळ (उपकंपनी)",
                description: "कोकण विभागातील इतर मागास प्रवर्गासाठी आर्थिक सहाय्य देणारी उपकंपनी, जी कमी व्याजदराने कर्ज पुरवते. ही उपकंपनी कोकणातील स्थानिक व्यवसाय जसे की मासेमारी, शेती आणि लघु उद्योगांना प्रोत्साहन देते.",
              },
              {
                id: "4-1-1-2",
                name: "जगदज्योती महात्मा बसवेश्वर आर्थिक विकास महामंडळ (उपकंपनी)",
                description: "विशिष्ट इतर मागास प्रवर्गातील समाजासाठी आर्थिक सहाय्य देणारी उपकंपनी, जी कमी व्याजदराने कर्ज पुरवते. ही उपकंपनी विशेषतः वीरशैव-लिंगायत समाजाला लक्ष्य करते आणि त्यांच्या आर्थिक विकासासाठी कार्य करते.",
              },
              {
                id: "4-1-1-3",
                name: "संत रविदास मुद्रा युवा आर्थिक विकास महामंडळ (उपकंपनी)",
                description: "विशिष्ट इतर मागास प्रवर्गातील समाजासाठी आर्थिक सहाय्य देणारी उपकंपनी, जी कमी व्याजदराने कर्ज पुरवते. ही उपकंपनी चर्मकार समाजाच्या तरुण उद्योजकांना स्वयंरोजगारासाठी प्रोत्साहन देते.",
              },
              {
                id: "4-1-1-4",
                name: "संत सेनाजी महाराज केशशिल्पी महामंडळ (उपकंपनी)",
                description: "विशिष्ट इतर मागास प्रवर्गातील समाजासाठी आर्थिक सहाय्य देणारी उपकंपनी, जी कमी व्याजदराने कर्ज पुरवते. ही उपकंपनी न्हावी समाजाला लक्ष्य करते आणि त्यांच्या पारंपारिक व्यवसायाला आधुनिक स्वरूप देण्यासाठी मदत करते.",
              },
              {
                id: "4-1-1-5",
                name: "बीज भांडवल कर्ज योजना",
                description: "या योजनेंतर्गत २५% महामंडळाचा सहभाग आणि ७५% बँकांचा सहभाग असतो. प्रकल्प मर्यादा ५.०० लाख रुपये आहे, व्याजदर ४%, आणि परतफेडीचा कालावधी ५ वर्षे आहे. या योजनेंतर्गत लाभार्थ्यांना व्यवसाय सुरू करण्यासाठी प्रारंभिक भांडवल मिळते, ज्यामुळे त्यांना स्वयंरोजगाराची संधी उपलब्ध होते. लाभार्थ्यांना व्यवसाय प्रशिक्षण देखील दिले जाते.",
              },
              {
                id: "4-1-1-6",
                name: "१०.०० लाखांपर्यंत थेट कर्ज योजना",
                description: "१०.०० लाखांपर्यंत थेट कर्ज उपलब्ध आहे. लाभार्थ्यांचा सहभाग शून्य आहे. नियमित परतफेड करणाऱ्या लाभार्थ्यांना व्याज आकारले जाणार नाही; अन्यथा ४% व्याज आकारले जाते. या योजनेंतर्गत कर्जाची परतफेड १२ हप्त्यांत करावी लागते, आणि कर्ज मंजुरीसाठी ऑनलाइन अर्ज प्रक्रिया उपलब्ध आहे, ज्यामुळे प्रक्रिया जलद आणि पारदर्शी होते.",
              },
              {
                id: "4-1-1-7",
                name: "वैयक्तिक कर्ज व्याज परतावा योजना",
                description: "१०.०० लाखांपर्यंतच्या कर्जावर १२% व्याजदरापर्यंत व्याज परतावा मिळतो, जो लाभार्थ्यांच्या बँक खात्यात दरमहा जमा केला जातो. या योजनेंतर्गत व्याज परतावा थेट लाभार्थ्यांच्या आधार लिंक केलेल्या बँक खात्यात जमा होतो, ज्यामुळे त्यांना आर्थिक भार कमी होतो.",
              },
              {
                id: "4-1-1-8",
                name: "गट कर्ज व्याज परतावा योजना",
                description: "१०.०० लाख ते ५०.०० लाखांपर्यंतच्या गट कर्जावर १२% व्याजदरापर्यंत व्याज परतावा मिळतो, जो दरमहा गटाच्या बँक खात्यात जमा केला जातो. गट कर्ज योजनेंतर्गत ५ ते १० व्यक्तींचा समूह तयार करून कर्ज घेता येते, आणि गटातील सर्व सदस्यांना प्रशिक्षण आणि मार्गदर्शन दिले जाते.",
              },
            ],
          },
          {
            id: "4-1-2",
            name: "वसंतराव नाईक विमुक्त जाती व भटक्या जमाती विकास महामंडळ",
            description: "विमुक्त जाती व भटक्या जमाती समुदायांसाठी आर्थिक सहाय्य.",
            subSchemes: [
              {
                id: "4-1-2-1",
                name: "पैलवान के. मारुती चर्हाण-वडार आर्थिक विकास महामंडळ (उपकंपनी)",
                description: "वडार समाजाच्या सामाजिक व आर्थिक उन्नतीसाठी स्थापन केलेली उपकंपनी, जी कमी व्याजदराने कर्ज पुरवते आणि स्वयंरोजगाराला प्रोत्साहन देते. वडार समाजातील व्यक्तींसाठी ही उपकंपनी पारंपारिक व्यवसाय जसे की दगड खणणे, बांधकाम यासह आधुनिक व्यवसाय जसे की लघु उद्योगांना प्रोत्साहन देते. या उपकंपनीमार्फत वडार समाजातील तरुणांना कौशल्य प्रशिक्षण आणि आर्थिक सहाय्य मिळते.",
                subSchemes: [
                  {
                    id: "4-1-2-1-1",
                    name: "बीज भांडवल कर्ज योजना",
                    description: "या योजनेंतर्गत २५% महामंडळाचा सहभाग आणि ७५% बँकांचा सहभाग असतो. प्रकल्प मर्यादा ५.०० लाख रुपये आहे, व्याजदर ४%, आणि परतफेडीचा कालावधी ५ वर्षे आहे. या योजनेंतर्गत लाभार्थ्यांना व्यवसाय सुरू करण्यासाठी प्रारंभिक भांडवल मिळते, ज्यामुळे त्यांना स्वयंरोजगाराची संधी उपलब्ध होते. लाभार्थ्यांना व्यवसाय प्रशिक्षण देखील दिले जाते.",
                  },
                  {
                    id: "4-1-2-1-2",
                    name: "१०.०० लाखांपर्यंत थेट कर्ज योजना",
                    description: "१०.०० लाखांपर्यंत थेट कर्ज उपलब्ध आहे. लाभार्थ्यांचा सहभाग शून्य आहे. नियमित परतफेड करणाऱ्या लाभार्थ्यांना व्याज आकारले जाणार नाही; अन्यथा ४% व्याज आकारले जाते. या योजनेंतर्गत कर्जाची परतफेड १२ हप्त्यांत करावी लागते, आणि कर्ज मंजुरीसाठी ऑनलाइन अर्ज प्रक्रिया उपलब्ध आहे, ज्यामुळे प्रक्रिया जलद आणि पारदर्शी होते.",
                  },
                  {
                    id: "4-1-2-1-3",
                    name: "वैयक्तिक कर्ज व्याज परतावा योजना",
                    description: "१०.०० लाखांपर्यंतच्या कर्जावर १२% व्याजदरापर्यंत व्याज परतावा मिळतो, जो लाभार्थ्यांच्या बँक खात्यात दरमहा जमा केला जातो. या योजनेंतर्गत व्याज परतावा थेट लाभार्थ्यांच्या आधार लिंक केलेल्या बँक खात्यात जमा होतो, ज्यामुळे त्यांना आर्थिक भार कमी होतो.",
                  },
                  {
                    id: "4-1-2-1-4",
                    name: "गट कर्ज व्याज परतावा योजना",
                    description: "१०.०० लाख ते ५०.०० लाखांपर्यंतच्या गट कर्जावर १२% व्याजदरापर्यंत व्याज परतावा मिळतो, जो दरमहा गटाच्या बँक खात्यात जमा केला जातो. गट कर्ज योजनेंतर्गत ५ ते १० व्यक्तींचा समूह तयार करून कर्ज घेता येते, आणि गटातील सर्व सदस्यांना प्रशिक्षण आणि मार्गदर्शन दिले जाते.",
                  },
                ],
              },
              {
                id: "4-1-2-2",
                name: "राजे उमाजी नाईक जातीय विकास महामंडळ (उपकंपनी)",
                description: "रामोशी समाजाच्या सामाजिक व आर्थिक उन्नतीसाठी स्थापन केलेली उपकंपनी, जी कमी व्याजदराने कर्ज पुरवते आणि स्वयंरोजगाराला प्रोत्साहन देते. रामोशी समाजातील व्यक्तींसाठी ही उपकंपनी शेती, पशुपालन आणि लघु उद्योगांसाठी कर्ज उपलब्ध करते, ज्यामुळे त्यांचे जीवनमान सुधारते. या उपकंपनीमार्फत रामोशी समाजातील व्यक्तींना आर्थिक स्वावलंबनासाठी मार्गदर्शन आणि प्रशिक्षण दिले जाते.",
                subSchemes: [
                  {
                    id: "4-1-2-2-1",
                    name: "बीज भांडवल कर्ज योजना",
                    description: "या योजनेंतर्गत २५% महामंडळाचा सहभाग आणि ७५% बँकांचा सहभाग असतो. प्रकल्प मर्यादा ५.०० लाख रुपये आहे, व्याजदर ४%, आणि परतफेडीचा कालावधी ५ वर्षे आहे. या योजनेंतर्गत लाभार्थ्यांना व्यवसाय सुरू करण्यासाठी प्रारंभिक भांडवल मिळते, ज्यामुळे त्यांना स्वयंरोजगाराची संधी उपलब्ध होते. लाभार्थ्यांना व्यवसाय प्रशिक्षण देखील दिले जाते.",
                  },
                  {
                    id: "4-1-2-2-2",
                    name: "१०.०० लाखांपर्यंत थेट कर्ज योजना",
                    description: "१०.०० लाखांपर्यंत थेट कर्ज उपलब्ध आहे. लाभार्थ्यांचा सहभाग शून्य आहे. नियमित परतफेड करणाऱ्या लाभार्थ्यांना व्याज आकारले जाणार नाही; अन्यथा ४% व्याज आकारले जाते. या योजनेंतर्गत कर्जाची परतफेड १२ हप्त्यांत करावी लागते, आणि कर्ज मंजुरीसाठी ऑनलाइन अर्ज प्रक्रिया उपलब्ध आहे, ज्यामुळे प्रक्रिया जलद आणि पारदर्शी होते.",
                  },
                  {
                    id: "4-1-2-2-3",
                    name: "वैयक्तिक कर्ज व्याज परतावा योजना",
                    description: "१०.०० लाखांपर्यंतच्या कर्जावर १२% व्याजदरापर्यंत व्याज परतावा मिळतो, जो लाभार्थ्यांच्या बँक खात्यात दरमहा जमा केला जातो. या योजनेंतर्गत व्याज परतावा थेट लाभार्थ्यांच्या आधार लिंक केलेल्या बँक खात्यात जमा होतो, ज्यामुळे त्यांना आर्थिक भार कमी होतो.",
                  },
                  {
                    id: "4-1-2-2-4",
                    name: "गट कर्ज व्याज परतावा योजना",
                    description: "१०.०० लाख ते ५०.०० लाखांपर्यंतच्या गट कर्जावर १२% व्याजदरापर्यंत व्याज परतावा मिळतो, जो दरमहा गटाच्या बँक खात्यात जमा केला जातो. गट कर्ज योजनेंतर्गत ५ ते १० व्यक्तींचा समूह तयार करून कर्ज घेता येते, आणि गटातील सर्व सदस्यांना प्रशिक्षण आणि मार्गदर्शन दिले जाते.",
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
  {
    id: "5",
    name: "इतर योजना",
    description: "या योजनांचे तपशील उपलब्ध नाहीत.",
    subSchemes: [],
  },
];

app.post('/webhook', (req, res) => {
  const userId = req.body.userId || 'defaultUser';
  const message = req.body.message ? req.body.message.trim() : '';

  if (!userState[userId]) {
    userState[userId] = { currentLevel: 'main', selectedScheme: null, selectedSubScheme: null };
  }

  const state = userState[userId];
  let response = '';

  if (message.toLowerCase() === 'start' || message.toLowerCase() === 'menu' || message === 'मेनू') {
    state.currentLevel = 'main';
    state.selectedScheme = null;
    state.selectedSubScheme = null;
    response = 'तुम्ही निवडलेली मुख्य योजना:\nमुख्य योजनांची यादी:\n' +
      schemes.map(s => `${s.id}. ${s.name}`).join('\n') +
      '\n\nकृपया मुख्य योजनेचा क्रमांक टाइप करा (उदा., 1)';
  } else if (state.currentLevel === 'main') {
    const scheme = schemes.find(s => s.id === message);
    if (scheme) {
      state.selectedScheme = scheme;
      if (scheme.subSchemes && scheme.subSchemes.length > 0) {
        state.currentLevel = 'subScheme';
        response = `तुम्ही निवडलेली मुख्य योजना: ${scheme.name}\n` +
          `उपयोजनांची यादी:\n` +
          scheme.subSchemes.map((ss, index) => `${index + 1}. ${ss.name}`).join('\n') +
          '\n\nकृपया उपयोजनाचा क्रमांक टाइप करा (उदा., 1)\n' +
          'कृपया मुख्य योजनेवर परत जाण्यासाठी \'मेनू\' टाइप करा';
      } else {
        response = `तुम्ही निवडलेली मुख्य योजना: ${scheme.name}\n` +
          `विवरण: ${scheme.description}\n\n` +
          'या योजनेसाठी कोणतीही उपयोजना उपलब्ध नाही.\n' +
          'कृपया मुख्य योजनेवर परत जाण्यासाठी \'मेनू\' टाइप करा';
      }
    } else {
      response = 'अवैध मुख्य योजना क्रमांक. कृपया योग्य मुख्य योजना निवडा:\n' +
        schemes.map(s => `${s.id}. ${s.name}`).join('\n') +
        '\n\nकृपया मुख्य योजनेचा क्रमांक टाइप करा (उदा., 1)';
    }
  } else if (state.currentLevel === 'subScheme') {
    const subSchemeIndex = parseInt(message) - 1;
    if (subSchemeIndex >= 0 && subSchemeIndex < state.selectedScheme.subSchemes.length) {
      const subScheme = state.selectedScheme.subSchemes[subSchemeIndex];
      state.selectedSubScheme = subScheme;
      if (subScheme.subSchemes && subScheme.subSchemes.length > 0) {
        state.currentLevel = 'subSubScheme';
        response = `तुम्ही निवडलेली उपयोजना: ${subScheme.name}\n` +
          `उप-उपयोजनांची यादी:\n` +
          subScheme.subSchemes.map((sss, index) => `${index + 1}. ${sss.name}`).join('\n') +
          '\n\nकृपया उप-उपयोजनाचा क्रमांक टाइप करा (उदा., 1)\n' +
          'कृपया मुख्य योजनेवर परत जाण्यासाठी \'मेनू\' टाइप करा';
      } else {
        response = `तुम्ही निवडलेली उपयोजना: ${subScheme.name}\n` +
          `विवरण: ${subScheme.description}\n\n` +
          'या उपयोजनेसाठी कोणतीही पुढील उप-उपयोजना उपलब्ध नाही.\n' +
          'कृपया मुख्य योजनेवर परत जाण्यासाठी \'मेनू\' टाइप करा';
      }
    } else {
      response = `अवैध उपयोजना क्रमांक. कृपया योग्य उपयोजना निवडा:\n` +
        state.selectedScheme.subSchemes.map((ss, index) => `${index + 1}. ${ss.name}`).join('\n') +
        '\n\nकृपया उपयोजनाचा क्रमांक टाइप करा (उदा., 1)\n' +
        'कृपया मुख्य योजनेवर परत जाण्यासाठी \'मेनू\' टाइप करा';
    }
  } else if (state.currentLevel === 'subSubScheme') {
    const subSubSchemeIndex = parseInt(message) - 1;
    if (subSubSchemeIndex >= 0 && subSubSchemeIndex < state.selectedSubScheme.subSchemes.length) {
      const subSubScheme = state.selectedSubScheme.subSchemes[subSubSchemeIndex];
      response = `तुम्ही निवडलेली उप-उपयोजना: ${subSubScheme.name}\n` +
        `विवरण: ${subSubScheme.description}\n\n` +
        'कृपया मुख्य योजनेवर परत जाण्यासाठी \'मेनू\' टाइप करा';
    } else {
      response = `अवैध उप-उपयोजना क्रमांक. कृपया योग्य उप-उपयोजना निवडा:\n` +
        state.selectedSubScheme.subSchemes.map((sss, index) => `${index + 1}. ${sss.name}`).join('\n') +
        '\n\nकृपया उप-उपयोजनाचा क्रमांक टाइप करा (उदा., 1)\n' +
        'कृपया मुख्य योजनेवर परत जाण्यासाठी \'मेनू\' टाइप करा';
    }
  }

  res.json({ response });
});

app.listen(3000, () => {
  console.log('Server is running on port 3000');
});